> Nginx는 웹 서버 소프트웨어로, 가벼움과 높은 성능을 목표로 한다. 웹 서버, 리버스 프록시 및 메일 프록시 기능을 가진다

위키 백과에 있는 정의를 가져와봤습니다. 
우선 위에서 알수 있듯 Nginx는 웹 서버 입니다. **웹 서버**란 무엇일까요?

우선 간단하게 두 대의 컴퓨터가 있다고 가정해 봅시다. 각각의 역할에 따라서 이 둘은 클라이언트와 서버로 나뉘게 됩니다. 

서버, 그 중 웹 서버의 역할은 다음과 같습니다. 
1. HTML, CSS, JS, 이미지 등의 정적 리소스를 저장한다 
2. 각 데이터를 특정 디렉토리에 위치시킨 후 외부에서 받아갈 수 있게끔 한다 

대표적인 웹 서버로는 Nginx와 Apache가 있습니다. 

그렇다면 웹 서버와 같이 언급되는 WAS는 무엇일까요? 우선 WAS의 대표적인 예시는 톰캣이 있습니다. 
*" WAS는 DB 조회나 로직 처리를 요구하는 동적 컨텐츠를 제공하기 위해 만들어진 어플리케이션 서버"*

즉, 정의에 따르면 Nginx는 정적 컨텐츠, Tomcat은 동적 컨텐츠를 처리합니다. (물론 최근에는 각각의 서버가 다양한 역할을 수행할 수 있습니다)

#### 분리된 이유
웹 서버와 WAS를 분리한 이유는 여러 가지가 있습니다. 
1. 리버스 프록시
	리버스 프록시는 프론트에 서버의 정보를 감추는 것입니다. 예를 들어, 정적 리소스가 어디에 저장되었는지, 내부적으로 포트는 몇 번을 사용하는지에 대한 정보들을 감춤으로써 보안을 강화할 수 있습니다.
2. 로드 밸런싱
	WAS 여러 개를 병렬적으로 실행 시키는 상황에서 WAS들에 일을 분산하는 것입니다. 
	
	*왜 하나의 어플리케이션에서 여러 개의 WAS를 사용할까요?*
	
	예를 들어 업데이트를 한다고 가정해 봅시다. 만약 하나의 WAS만 가지고 있다면 업데이트 시간에는 다른 작업을 할 수 없습니다. 하지만 다수의 WAS를 차례대로 업데이트 한다면 사용자 입장에서는 끊긴 없이 서비스를 이용할 수 있습니다.
	또한, 성능 면에서도 유리합니다.
3. 캐싱
	forward proxy 관점에서의 캐싱이 한번 받아온 정적 리소스들이 프록시 서버에 저장되었다 다음 요청 시 바로 꺼내 볼 수 있는 것이라면, reverse proxy 관점에서의 캐싱은 서버로 찾아오는 클라이언트들이 반복적으로 사용할 만한 리소스들을 저장해놨다가 바로 건내주는 것을 의미합니다.

#### Apache와 Nginx
Apache는 예전부터 사용되어 왔습니다. 흔히들 말하는 Apache + Php + mysql (APM) 이 그 근거 중 하나입니다. 
하지만 최근에는 Nginx가 Apache의 점유율을 따라잡는 추세입니다. 

우선 Apache는 사용자가 요청 할 때 마다 프로세스를 새로 생성하거나, 한 프로세스 안에서 스레드를 새로 생성합니다. 하지만 프로세스의 생성 시간이 오래 걸렸고, 이를 해결하기 위해 PREFORK (미리 만들어놓는 프로세스) 방식을 채택하여 사용하였습니다.
새로운 클라이언트의 요청이 들어오면 미리 만들어놓은 프로세스를 할당하면 됐고, 만약 프로세스가 모두 할당되었다면 새로운 프로세스를 만들면 되니 확장성이 좋았던 것을 알 수 있습니다.

하지만 Apache는 컨텍스트 스위칭을 사용하여 컴퓨터 리소스가 많이 소모됩니다. 또한, 1990년대 후반에는 많은 트래픽을 감당하지 못하는 C10K 문제도 발생하였습니다.
확장성이라는 장점에 프로그램의 무거움으로 변하였고, 메모리 부족, CPU 부하 등이 뒤를 이었습니다.

이를 보안하기 위해 나온 것이 **Nginx** 입니다. 
Nginx는 이벤트로 일을 처리합니다. 이를 **event-driven** 이라고 합니다. 
컴퓨터에 부담이 덜하며 아파치 보다 성능적으로 우위에 있습니다. 

#### Reference
- https://www.youtube.com/watch?v=Zimhvf2B7Es&t=173s
- https://www.youtube.com/watch?v=6FAwAXXj5N0